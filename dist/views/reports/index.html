<div id="main_layout"><div id="sidebar" hack-sidebar-height=""><!-- Include views/layouts/menu.html --><div ng-include="'views/layout/menu.html'"></div></div><div id="main_content"><!-- Include views/layouts/header.html --><div ng-include="'views/layout/header.html'"></div><div class="loading" ng-show="loading"></div><div class="loading" ng-show="loadingContent"></div><div ng-hide="loading" class="pages-animation"><div class="title"><div class="links"><a href="#/reports" class="active"><span class="glyphicon glyphicon-list"></span><p>Explorar em lista</p></a> <a href="#/reports/map"><span class="glyphicon glyphicon-map-marker"></span><p>Explorar no mapa</p></a></div><a href="#/reports/categories" class="btn btn-info btn-custom">Gerenciar categorias</a> <a href="" ng-click="reload()" class="btn btn-info btn-custom"><i class="glyphicon glyphicon-refresh"></i></a></div><div class="advancedSearch" id="advancedSearch" ng-show="advancedSearch"><div class="col-xs-9 search_column1"><span class="glyphicon glyphicon-search search_icon"></span><input type="text" placeholder="Busque um filtro..." on-focus="show_availableFilters = true" on-blur="show_availableFilters = false" on-blur-delay="200" ng-model="filterQuery" style="width: 80%"><div class="clearfix"></div><div class="availableFilters" ng-show="show_availableFilters"><a href="" ng-click="loadFilter('query')">Protocolo ou endereço contém...</a> <a href="" ng-click="loadFilter(filter.action)" ng-repeat="filter in availableFilters | filter:filterQuery">{{ filter.name }}</a></div><div class="advanced_filters_bar" ng-show="activeAdvancedFilters.length !== 0"><div class="filter" ng-repeat="filter in activeAdvancedFilters"><b>{{ filter.title }}</b> {{ filter.desc }} <span class="glyphicon glyphicon-remove" ng-click="removeFilter(filter)"></span></div></div><div class="clearfix"></div><a href="" class="clear_filters" ng-show="activeAdvancedFilters.length !== 0" ng-click="resetFilters()"><span class="glyphicon glyphicon-remove"></span> Limpar todos os filtros</a></div><div class="col-xs-3 filter_change"><a href="" ng-click="advancedSearch = false">Utilizar busca simples</a></div><div class="clearfix"></div></div><div class="simple_search" ng-hide="advancedSearch"><div class="col-xs-9 search_column1"><span class="glyphicon glyphicon-search search_icon"></span><input type="text" placeholder="Busque pelo endereço" keyboard-poster="search" style="width: 80%"></div><div class="col-xs-3 filter_change"><a href="" ng-click="advancedSearch = true">Utilizar busca avançada</a></div></div><div class="simple_filters" ng-hide="advancedSearch"><div class="col-xs-4"><div class="form-group"><label>Nas categorias</label><select class="multiple-select" ui-select2="" ng-model="selectedCategories" data-placeholder="Digite uma categoria" multiple><option ng-repeat="category in categories" value="{{ category.id }}">{{ category.title }}</option></select></div></div><div class="col-xs-4"><div class="form-group"><label>Com status</label><select class="multiple-select" ui-select2="" ng-model="selectedStatuses" data-placeholder="Digite um status" multiple><option ng-repeat="status in statuses" value="{{ status.id }}">{{ status.title }}</option></select></div></div><div class="col-xs-4"><div class="col-xs-6"><div class="form-group"><label>No periódo</label><div class="datepicker-popup"><input type="text" class="form-control" datepicker-popup="dd/MM/yyyy" ng-model="beginDate" show-weeks="false" datepicker-options="dateOptions" show-button-bar="false" placeholder="20/03/2013"></div></div></div><div class="col-xs-6"><label>Até</label><div class="datepicker-popup"><input type="text" class="form-control" datepicker-popup="dd/MM/yyyy" ng-model="endDate" show-weeks="false" datepicker-options="dateOptions" show-button-bar="false" placeholder="23/03/2013"></div></div></div><div class="clearfix"></div></div><table class="table custom_table reports" infinite-scroll="getData(true)" infinite-scroll-distance="3" ng-class="{'advanced-filters-margin': advancedSearch == true}" style-results-table=""><thead><tr><td ng-click="changeSorting('protocol')" ng-class="selectedCls('protocol')" width="10%" class="sort-table"><span>Protocolo</span><span class="arrow"></span></td><td ng-click="changeSorting('address')" ng-class="selectedCls('address')" width="20%" class="sort-table"><span>Endereço</span><span class="arrow"></span></td><td ng-click="changeSorting('user.name')" ng-class="selectedCls('user.name')" class="sort-table"><span>Autor</span><span class="arrow"></span></td><td ng-click="changeSorting('category_id')" ng-class="selectedCls('category_id')" class="sort-table"><span>Categoria</span><span class="arrow"></span></td><td ng-click="changeSorting('created_at')" ng-class="selectedCls('created_at')" class="sort-table"><span>Data de inclusão</span><span class="arrow"></span></td><td></td></tr></thead><tr ng-repeat="report in reports | orderBy:sort.column:sort.descending"><td class="status_color"><span ng-repeat="status in getReportCategory(report.category_id).statuses" ng-style="{'background-color': status.color}" ng-show="status.id == report.status_id"></span><a href="#/reports/categories/{{ report.category_id }}/item/{{ report.id }}">{{ report.protocol }}</a></td><td>{{ report.address }}</td><td><a href="#/users/{{ report.user.id }}">{{ report.user.name }}</a></td><td>{{ getReportCategory(report.category_id).title }}</td><td>{{ report.created_at | date:'dd/MM/yy HH:mm'}}</td><td class="actions"><a class="icon_action" href="" ng-click="editReportStatus(report, getReportCategory(report.category_id))"><span class="glyphicon glyphicon-edit"></span></a> <a class="icon_action" href="" ng-click="deleteReport(report)"><span class="glyphicon glyphicon-trash"></span></a></td></tr></table><div class="loadingScrolling" ng-show="loadingPagination && !loadingContent"></div></div></div></div>