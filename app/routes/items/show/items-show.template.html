<div class="loading" ng-show="loading"></div>

<div ng-hide="loading" class="pages-animation">
  <div class="title">
    <ul>
      <li><a href="#/items">Inventário</a></li>
      <li>{{ item.title }}</li>
    </ul>

    <a href="#/items/select-category" class="btn btn-info btn-custom">+ Novo item</a>
    <a class="icon_action" href="" ng-click="deleteItem(item, category)"><span class="glyphicon glyphicon-trash"></span></a>
    <a href="#/items/{{ item.id }}/category/{{ item.inventory_category_id }}/edit" class="icon_action"><span class="glyphicon glyphicon-edit"></span></a>
  </div>

  <div class="status-bar" ng-repeat="status in category.statuses" ng-if="status.id == item.inventory_status_id">
    <div class="background" ng-style="{ 'background-color': status.color }"></div>
    <p class="pull-left" ng-style="{ 'color': status.color }">{{ status.title }}</p>
    <a class="pull-right" ng-click="editItemStatus(item, category)" href="">Alterar status</a>

    <div class="clearfix"></div>
  </div>

  <div class="content wrappers">

    <div class="rounder_wrapper" ng-repeat="section in category.sections | orderBy:'position'">
      <div class="wrapper_title"><h1>{{ section.title }}</h1></div>

      <div class="fields">
        <div class="field" ng-repeat="field in section.fields | orderBy:'position'" ng-hide="field.disabled === true && !getDataByInventoryFieldId(field.id)">
            <h5 ng-show="field.label !== null">{{ field.label }} <span class="label label-danger" ng-if="field.disabled === true">Campo removido</span></h5>
            <h5 ng-show="field.label == null">{{ field.title }} <span class="label label-danger" ng-if="field.disabled === true">Campo removido</span></h5>

            <!-- special field rendering: images -->
            <div ng-if="field.kind == 'images'">
              <gallery images="getDataByInventoryFieldId(field.id)"></gallery>
            </div>

            <!-- special field rendering: checkbox -->
            <div ng-if="field.kind === 'checkbox'">
              <ul>
                <li ng-repeat="value in getDataByInventoryFieldId(field.id)">{{ value }}</li>
              </ul>
            </div>

            <!-- all other fields -->
            <div ng-if="field.kind !== 'checkbox' && field.kind !== 'images' && getDataByInventoryFieldId(field.id) && getDataByInventoryFieldId(field.id).length != 0">
              <p>{{ getDataByInventoryFieldId(field.id) }}

              <span ng-if="field.kind == 'meters'">metros</span>
              <span ng-if="field.kind == 'centimeters'">cm</span>
              <span ng-if="field.kind == 'kilometers'">km</span>
              <span ng-if="field.kind == 'years'">anos</span>
              <span ng-if="field.kind == 'months'">meses</span>
              <span ng-if="field.kind == 'days'">dias</span>
              <span ng-if="field.kind == 'hours'">horas</span>
              <span ng-if="field.kind == 'seconds'">segundos</span>
              <span ng-if="field.kind == 'angle'">ângulo</span></p>
            </div>

            <p ng-show="field.kind !== 'images' && (!getDataByInventoryFieldId(field.id) || getDataByInventoryFieldId(field.id).length == 0)">
              Não preenchido.
            </p>

            <p ng-show="field.kind == 'images' && (!getDataByInventoryFieldId(field.id) || getDataByInventoryFieldId(field.id).length == 0)">
              Sem imagens.
            </p>

            <div class="cleafix"></div>
        </div>
      </div>
    </div>

    <div class="rounder_wrapper">
      <div class="wrapper_title"><h1>Mapa</h1></div>

      <div class="fields">
        <div class="roundedMap" map-show-item></div>
      </div>
    </div>

    <div class="rounder_wrapper" map-view-streetview latitude="item.position.latitude" longitude="item.position.longitude" ng-hide="hideStreetview">
      <div class="wrapper_title"><h1>Streetview {{hide}}</h1></div>

      <div class="fields">
        <div class="roundedMap"></div>
      </div>
    </div>

    <div class="rounder_wrapper" map-view-streetview latitude="item.position.latitude" longitude="item.position.longitude" ng-hide="hideStreetview">
      <div class="wrapper_title"><h1>Histórico</h1></div>

      <div class="item-history">

        <div class="filters">
          <div class="filter">
            <b>Exibindo</b>

            <div class="btn-group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
              Tipos <span class="caret"></span>
              </button>

              <ul class="dropdown-menu" role="menu">
                <li ng-repeat="filter in availableHistoryFilters"><a href="" ng-click="toggleOption(filter)"> <b class="glyphicon glyphicon-ok"></b> {{ filter.name }}</a></li>
                <li class="divider"></li>
                <li><a href="#">Marcar todos</a></li>
              </ul>
            </div>
          </div>

          <div class="filter">
            <b>Período</b>

            <div class="btn-group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
              Tipos <span class="caret"></span>
              </button>

              <ul class="dropdown-menu" role="menu">
                <li ng-repeat="filter in availableHistoryFilters"><a href="" ng-click="toggleOption(filter)"> <b class="glyphicon glyphicon-ok"></b> {{ filter.name }}</a></li>
                <li class="divider"></li>
                <li><a href="#">Marcar todos</a></li>
              </ul>
            </div>
          </div>

          <div class="filter datepicker">
            <input type="text" class="form-control" datepicker-popup ng-model="dt" show-weeks="false" show-button-bar="false" />
          </div>

          <span class="until">até</span>

          <div class="filter">
            <input type="text" class="form-control" datepicker-popup ng-model="ds" show-weeks="false" show-button-bar="false" />
          </div>

          <div class="clearfix"></div>
        </div>

        <ul class="timeline">

          <li>

            <div class="date">
              <div class="line"></div>
              <span>16/11/2013</span>
            </div>

            <div class="action">
              <p><a href="#">Rodrigo Silva</a> adicionou novas fotos.</p>
            </div>

            <div class="clearfix"></div>

          </li>

          <li>

            <div class="date">
              <div class="line"></div>
              <span>16/11/2013</span>
            </div>

            <div class="action">
              <p><a href="#">Rodrigo Silva</a> adicionou novas fotos.</p>
            </div>

            <div class="clearfix"></div>

          </li>

          <li>

            <div class="date">
              <div class="line"></div>
              <span>16/11/2013</span>
            </div>

            <div class="action">
              <p><a href="#">Rodrigo Silva</a> adicionou novas fotos.</p>
            </div>

            <div class="clearfix"></div>

          </li>

        </ul>

      </div>
    </div>

  </div>
</div>
