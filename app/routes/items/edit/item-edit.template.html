<div id="full_page" class="items-edit">
  <div class="header" ng-hide="loading">
    <a href="#/inventories" class="back"><span class="glyphicon glyphicon-chevron-left"></span></a>

    <div class="title" ng-show="!updating">Novo item de inventário</div>
    <div class="title" ng-show="updating">Editar item: {{ item.title }}</div>

    <div ng-show="showSystemMessage" class="message-status fade-animation" ng-class="systemMessage.messageClass">
      <p><span class="glyphicon" ng-class="glyphicons[systemMessage.icon]"></span> {{ systemMessage.text }}</p>
    </div>

    <a href="" ng-click="send()" class="submit_button"><span ng-show="!updating">Cadastrar</span><span ng-show="updating">Atualizar</span></a>
  </div>

  <div class="saving" ng-show="processingForm">
    <div class="loading"></div>
  </div>

  <div class="spacing"></div>

  <div class="loading" ng-show="loading"></div>

  <form class="pages-animation" ng-hide="loading">
    <div class="big_content_darker">

      <div class="rounder_wrapper errors" ng-show="inputErrors">
        <div class="alert alert-danger fade-animation">
          <p ng-bind-html="inputErrors | formatErrors"></p>
        </div>
      </div>

      <div class="rounder_wrapper">
        <div class="title"><h1>Status de item *</h1></div>

        <div class="fields">
          <div class="form-group">
            <div>
              <div class="radio" ng-repeat="status in category.statuses">
                <label>
                  <input type="radio" ng-model="item.inventory_status_id" ng-value="status.id">
                  {{ status.title }}
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="rounder_wrapper" ng-repeat="section in category.sections | orderBy:'position'">
        <div class="title"><h1>{{ section.title }} <span ng-show="section.required == true">*</span></h1></div>

        <div class="fields">

          <!-- show custom lat/lng fields -->
          <div ng-show="section.location == true">
            <div class="row">
              <!-- latitude field -->
              <div class="col-xs-4">
                <div class="form-group">
                  <label for="generic_input_{{ locationFieldsIds[0] }}">
                    Latitude
                  </label>

                  <input class="form-control" id="generic_input_{{ locationFieldsIds[0] }}" type="text" ng-model="itemData[locationFieldsIds[0]]" generic-input name="latitude">
                </div>
              </div>

              <!-- longitude field -->
              <div class="col-xs-4">
                <div class="form-group">
                  <label for="generic_input_{{ locationFieldsIds[1] }}">
                    Longitude
                  </label>

                  <input class="form-control" id="generic_input_{{ locationFieldsIds[1] }}" type="text" ng-model="itemData[locationFieldsIds[1]]" generic-input name="longitude">
                </div>
              </div>

              <!-- modal button -->
              <div class="col-xs-4">
                <a href="" ng-click="openMapModal()" class="btn btn-info btn-fat-custom btn-custom" style="margin-top: 25px;">Localizar no mapa</a>
              </div>
            </div>
          </div>

          <!-- show normal fields -->
          <div class="form-group" ng-repeat="field in section.fields | orderBy:'position'" ng-hide="hiddenFields.indexOf(field.id) !== -1">
            <label for="generic_input_{{ field.id }}">
              <span ng-show="field.label !== null">{{ field.label }}</span>
              <span ng-show="field.label == null">{{ field.title }}</span>
              <span ng-show="field.required == true"> *</span>
            </label>

            <!-- field type: text, url, email -->
            <input class="form-control" id="generic_input_{{ field.id }}" type="text" ng-if="field.kind == 'text' || field.kind == 'url' || field.kind == 'email'" ng-model="itemData[field.id]" generic-input name="{{ field.title }}">

            <!-- input type date, time, cpf, cnpj -->
            <div class="custom_size col-xs-3" ng-if="field.kind == 'date' || field.kind == 'time' || field.kind == 'cpf' || field.kind == 'cnpj'">
              <input class="form-control" id="generic_input_{{ field.id }}" type="text" ng-model="itemData[field.id]" generic-input name="{{ field.title }}">
            </div>

            <!-- field type: integer, decimal -->
            <div class="custom_size col-xs-2" ng-if="field.kind == 'integer' || field.kind == 'decimal'">
              <input class="form-control" id="generic_input_{{ field.id }}" type="text" ng-model="itemData[field.id]" generic-input name="{{ field.title }}">
            </div>

            <!-- input type: meters -->
            <div class="input-group custom_size col-xs-3" ng-if="field.kind == 'meters'">
              <input type="text" id="generic_input_{{ field.id }}" class="form-control" type="text" type="text" ng-model="itemData[field.id]" generic-input name="{{ field.title }}">
              <span class="input-group-addon">metros</span>
            </div>

            <!-- input type: centimeters -->
            <div class="input-group custom_size col-xs-3" ng-if="field.kind == 'centimeters'">
              <input type="text" id="generic_input_{{ field.id }}" class="form-control" type="text" type="text" ng-model="itemData[field.id]" generic-input name="{{ field.title }}">
              <span class="input-group-addon">cm</span>
            </div>

            <!-- input type: kilometers -->
            <div class="input-group custom_size col-xs-3" ng-if="field.kind == 'kilometers'">
              <input type="text" id="generic_input_{{ field.id }}" class="form-control" type="text" type="text" ng-model="itemData[field.id]" generic-input name="{{ field.title }}">
              <span class="input-group-addon">km</span>
            </div>

            <!-- input type: years -->
            <div class="input-group custom_size col-xs-3" ng-if="field.kind == 'years'">
              <input type="text" id="generic_input_{{ field.id }}" class="form-control" type="text" type="text" ng-model="itemData[field.id]" generic-input name="{{ field.title }}">
              <span class="input-group-addon">anos</span>
            </div>

            <!-- input type: months -->
            <div class="input-group custom_size col-xs-3" ng-if="field.kind == 'months'">
              <input type="text" id="generic_input_{{ field.id }}" class="form-control" type="text" type="text" ng-model="itemData[field.id]" generic-input name="{{ field.title }}">
              <span class="input-group-addon">meses</span>
            </div>

            <!-- input type: days -->
            <div class="input-group custom_size col-xs-3" ng-if="field.kind == 'days'">
              <input type="text" id="generic_input_{{ field.id }}" class="form-control" type="text" type="text" ng-model="itemData[field.id]" generic-input name="{{ field.title }}">
              <span class="input-group-addon">dias</span>
            </div>

            <!-- input type: hours -->
            <div class="input-group custom_size col-xs-3" ng-if="field.kind == 'hours'">
              <input type="text" id="generic_input_{{ field.id }}" class="form-control" type="text" type="text" ng-model="itemData[field.id]" generic-input name="{{ field.title }}">
              <span class="input-group-addon">horas</span>
            </div>

            <!-- input type: seconds -->
            <div class="input-group custom_size col-xs-3" ng-if="field.kind == 'seconds'">
              <input type="text" id="generic_input_{{ field.id }}" class="form-control" type="text" type="text" ng-model="itemData[field.id]" generic-input name="{{ field.title }}">
              <span class="input-group-addon">segundos</span>
            </div>

            <!-- input type: angle -->
            <div class="input-group custom_size col-xs-3" ng-if="field.kind == 'angle'">
              <span class="input-group-addon">ângulo</span>
              <input type="text" id="generic_input_{{ field.id }}" class="form-control" type="text" type="text" ng-model="itemData[field.id]" generic-input name="{{ field.title }}">
            </div>

            <!-- field type: checkbox -->
            <div ng-if="field.kind == 'checkbox'">
              <div class="checkbox" ng-repeat="value in field.available_values track by $index">
                <label>
                  <input type="checkbox" ng-model="itemData[field.id][value]">
                  {{ value }}
                </label>
              </div>
            </div>

            <!-- field type: radio -->
            <div ng-if="field.kind == 'radio'">
              <div class="radio" ng-repeat="value in field.available_values track by $index">
                <label>
                  <input type="radio" ng-model="itemData[field.id]" ng-value="value">
                  {{ value }}
                </label>
              </div>
            </div>

            <!-- field type: select -->
            <div ng-if="field.kind == 'select'">
              <select class="multiple-select" style="width: 33%;" ui-select2 ng-model="itemData[field.id]" data-placeholder="Selecione uma opção">
                <option ng-repeat="value in field.available_values track by $index" ng-value="value">{{ value }}</option>
              </select>
            </div>

            <!-- field type: images -->
            <div ng-if="field.kind == 'images'" class="upload" nv-file-drop uploader="uploaders[field.id]">
              <div class="queue">
                <div class="image" ng-repeat="image in uploaders[field.id].existingImages">
                  <img ng-src="{{image.url}}" width="100" height="100" />
                  <!--<button type="button" ng-click="item.remove()">
                    <span class="glyphicon glyphicon-trash"></span>
                  </button>-->
                </div>

                <div class="image" ng-repeat="item in uploaders[field.id].queue">
                  <div ng-show="uploaders[field.id].isHTML5" ng-thumb="{ file: item._file, width: 100, height: 100 }"></div>

                  <span ng-show="!uploaders[field.id].isHTML5">{{ item.file.name }}</span>

                  <button type="button" ng-click="item.remove()">
                    <span class="glyphicon glyphicon-trash"></span>
                  </button>
                </div>

                <div ng-show="uploaders[field.id].isHTML5" class="drop-zone" nv-file-over uploader="uploaders[field.id]">
                  <span>Arraste imagem aqui</span>
                </div>
              </div>

              <span class="or">ou</span>

              <div class="btn btn-info btn-custom btn-upload">
                  <span>Selecione os arquivos</span>

                  <input type="file" nv-file-select uploader="uploaders[field.id]" multiple  />
              </div>
            </div>

          </div>
        </div>
      </div>

      <div class="clearfix"></div>
    </div>
  </form>
</div>
