<div class="loading" ng-show="loading"></div>

<div ng-hide="loading" class="pages-animation">
  <div class="title">
    <ul>
      <li><a href="#/groups">Grupos</a></li>
      <li><a href="#/groups/{{ group.id }}">{{ group.name }}</a></li>
      <li>Editar permissões</li>
    </ul>
  </div>

  <div class="content groups-permissions">

    <h3>Configure as permissões</h3>

    <div class="add-permission row">

      <div class="option col-xs-3">
        <div class="btn-group">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
            {{ getTypeName(newPermission.type) || 'Selecione o tipo' }} <span class="pull-right"><span class="caret"></span></span>
          </button>

          <ul class="dropdown-menu" role="menu">
            <li ng-repeat="permissionType in availablePermissionTypes" ng-class="{ 'active': newPermission.type == permissionType.type }"><a href="" ng-click="setNewPermissionType(permissionType.type)">{{ permissionType.name }}</a></li>
          </ul>
        </div>
      </div>

      <div class="option col-xs-4">
        <div class="btn-group">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
            {{ getPermissionName(newPermission.type, newPermission.slug) || 'Selecione a permissão' }} <span class="pull-right"><span class="caret"></span></span>
          </button>

          <ul class="dropdown-menu" role="menu" ng-show="getTypePermissions(newPermission.type)">
            <li ng-repeat="permission in getTypePermissions(newPermission.type)" ng-class="{ 'active': newPermission.slug == permission.slug }"><a href="" ng-click="newPermission.slug = permission.slug">{{ permission.name }}</a></li>
          </ul>
        </div>
      </div>

      <div class="option col-xs-3 pages-animation" ng-show="isObjectNeeded(newPermission.type, newPermission.slug)">
        <div class="btn-group">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
            Selecione a categoria <span class="pull-right"><span class="caret"></span></span>
          </button>

          <ul class="dropdown-menu" role="menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li class="divider"></li>
            <li><a href="#">Separated link</a></li>
          </ul>
        </div>
      </div>

      <div class="option col-xs-2">
        <button type="button" class="btn btn-info btn-custom" ng-disabled="!(newPermission.type && newPermission.slug)" ng-click="createPermission()">Adicionar</button>
      </div>

    </div>

    <div class="permissions-list">
      <h1>Permissões adicionadas</h1>

      <table class="table custom_table">
        <thead>
          <tr>
            <td width="15%">Tipo</td>
            <td width="15%">Categoria</td>
            <td width="70%">Permissões</td>
          </tr>
        </thead>

        <tbody>
          <tr ng-repeat="permission in permissions">
            <td>{{ getTypeName(permission.permission_type) }}</td>
            <td>{{ permission.object.title || 'Todos' }}</td>
            <td>
              <span ng-if="isString(permission.permission_names)" class="permission-name">{{ getPermissionName(permission.permission_type, permission.permission_names) }} <a href=""><i class="glyphicon glyphicon-remove"></i></a></span>
              <span ng-if="!isString(permission.permission_names)" ng-repeat="name in permission.permission_names track by $index" class="permission-name">{{ getPermissionName(permission.permission_type, name) }} <a href=""><i class="glyphicon glyphicon-remove"></i></span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>

</div>

