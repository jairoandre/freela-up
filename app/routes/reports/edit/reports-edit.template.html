<div class="loading" ng-show="loading"></div>

<div ng-hide="loading" class="editReports pages-animation">
  <div class="title">
    <ul>
      <li><a href="#/reports">Relatos</a></li>
      <li><span ng-hide="updating">Novo relato</span><span ng-show="updating">Editar relato {{ report.protocol }}</span></li>
    </ul>
  </div>

  <div class="content bigPadding">
    <form ng-submit="send()">

      <h3>1. Selecione a categoria</h3>

      <select class="multiple-select" style="width: 33%;" ui-select2 ng-model="selectedCategory" data-placeholder="Selecione uma categoria">
        <option value="">Selecione uma categoria</option>

        <optgroup ng-repeat="category in categories" label="{{ category.title }}">
          <option ng-value="category.id" ng-value="category.id">{{ category.title }}</option>
          <option ng-repeat="subcategory in category.subcategories" ng-value="subcategory.id">{{ subcategory.title }}</option>
        </optgroup>
      </select>

      <hr />

      <div ng-show="selectedCategory" class="pages-animation">
        <h3>2. Selecione o endereço</h3>

        <p>Digite o endereço, ou arraste o pino até a posição exata.</p>

        <div class="search-map">
          <input type="name" class="searchField" placeholder="Pesquisar" ng-model="formattedAddress" report-search-map>
        </div>

        <div class="form-group reportMap">
          <div class="loadingMap" ng-show="isLoadingItems">
            <div class="loadingScrolling"></div>
          </div>

          <div class="roundedMap" map-new-report></div>
        </div>

        <hr />

        <h3>3. Adicione imagens (opcional)</h3>

        <div class="form-group">
          <div class="upload" nv-file-drop uploader="uploader">
            <div class="queue">
              <div class="image" ng-repeat="image in uploader.existingImages">
                <img ng-src="{{image.url}}" width="100" height="100" />
                <!--<button type="button" ng-click="item.remove()">
                  <span class="glyphicon glyphicon-trash"></span>
                </button>-->
              </div>

              <div class="image" ng-repeat="item in uploader.queue">
                <div ng-show="uploader.isHTML5" ng-thumb="{ file: item._file, width: 100, height: 100 }"></div>

                <span ng-show="!uploader.isHTML5">{{ item.file.name }}</span>

                <button type="button" ng-click="item.remove()">
                  <span class="glyphicon glyphicon-trash"></span>
                </button>
              </div>

              <div ng-show="uploader.isHTML5" class="drop-zone" nv-file-over uploader="uploader">
                <span>Arraste imagem aqui</span>
              </div>
            </div>

            <span class="or">ou</span>

            <div class="btn btn-info btn-custom btn-upload">
                <span>Selecione os arquivos</span>

                <input type="file" nv-file-select uploader="uploader" multiple  />
            </div>
          </div>
        </div>

        <hr />

        <h3>4. Descreva a situação (opcional)</h3>

        <textarea class="form-control" placeholder="Descreva o problema aqui..." ng-model="description"></textarea>

        <hr />

        <h3>5. Vincule a um usuário (opcional)</h3>

        <hr />

        <button type="submit" class="btn btn-info btn-custom btn-lg-custom" ng-hide="updating">Criar relato</button>

        <button type="submit" class="btn btn-info btn-custom btn-lg-custom" ng-show="updating">Atualizar relato</button>
      </div>
    </form>
  </div>
</div>
