<div class="loading" ng-show="loading"></div>

<div ng-hide="loading" class="pages-animation">
  <div class="title">
    <ul>
      <li><a ng-href="#/reports">Relatos</a></li>
      <li><a ng-href="#/reports/categories">Gerenciar categorias</a></li>
      <li>Gerenciar perímetros/regiões</li>
    </ul>
  </div>

  <style>
    .perimeter-btn-cell {
      width: 30px;
      font-size: 15px;
    }
    .perimeter-table-tr {
      height: 65px;
    }
    .perimeter-span-title {
      cursor: pointer;
    }
    .perimeter-title-cell {
     width: 40%;
    }
    .perimeter-status-cell {
      width: 40%;
    }
    .perimeter-table-tr .perimeter-status-cell {
      font-weight: bold;
    }
    .perimeters-table thead tr td {
      padding: 0 !important;
    }
    .perimeter-status-process {
      color: #9b9b9b;
    }
    .perimeter-status-ok {
      color: #5fb971;
    }
    .perimeter-status-error {
      color: #f14446;
    }
    .perimeters-empty-message {
      font-weight: bold;
    }
    .perimeter-status-cell .glyphicon {
      font-size: 20px;
    }
  </style>

  <div class="content">

    <div class="form-group">
      <a href="" ng-click="addPerimeter()" class="btn btn-info btn-custom btn-lg-custom">Cadastrar novo perímetro</a>
    </div>

    <h3>Perímetros/Regiões cadastrados</h3>

    <hr/>

    <div class="table-div">
      <table id="reports-perimeters-table" class="table custom_table perimeters-table">
        <thead>
        <tr>
          <td class="perimeter-title-cell">
            <span>Nome do Perímetro/Região</span>
          </td>
          <td class="perimeter-status-cell">
            <span>Status</span>
          </td>
          <td class="perimeter-date-cell">
            <span>Data de inclusão</span>
          </td>
          <td class="perimeter-btn-cell"></td>
        </tr>
        </thead>
        <tbody>
        <tr class="perimeter-table-tr" ng-repeat="perimeter in perimeters" >
          <td class="perimeter-title-cell" title="{{perimeter.title}}">
            <span inline-edit="perimeter.title" inline-edit-callback="updatePerimeter(perimeter, newValue)" inline-edit-on-click inline-edit-on-blur="save" inline-edit-btn-edit="" class="perimeter-span-title"></span>
            <!--<input type="text" ng-model="perimeter.title" class="form-control" ng-if="edit_flags[$index]" ng-blur="edit_flags[$index] = false">-->
            <!--<span ng-click="edit_flags[$index] = true" ng-init="focus()" ng-bind="perimeter.title" ng-if="!edit_flags[$index]"></span>-->
          </td>
          <td class="perimeter-status-cell {{statusDecorator[perimeter.status][1]}}">
            <i class="glyphicon glyphicon-{{statusDecorator[perimeter.status][0]}}"></i>
            &nbsp;<span ng-bind="statusDecorator[perimeter.status][2]"></span>
          </td>
          <td class="perimeter-date-cell">
            {{perimeter.created_at | date : 'dd/MM/yy hh:mm'}}
          </td>
          <td class="perimeter-btn-cell">
            <a href="" confirm-dialog
               cd-modal-title="Remover perímetro/região"
               cd-item-title="perimeter.title"
               cd-confirm-function="deletePerimeter(perimeter)"
               cd-confirm-promise="deletePromise">
              <span class="glyphicon glyphicon-trash"></span></a>
          </td>
        </tr>
        </tbody>
      </table>
      <div class="perimeters-empty-message" ng-if="perimeters.length === 0">
        Nenhum perímetro cadastado.
      </div>



    </div>
  </div>


</div>
