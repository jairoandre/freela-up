<div class="modal-header">
  <button type="button" class="close" ng-click="close()">&times;</button>
  <h4 class="modal-title">Dos campos...</h4>
</div>

<div class="modal-body">
  <div class="new_field">
    <div class="btn-group btn-group-block">
      <button type="button" class="btn btn-default dropdown-toggle btn-block" data-toggle="dropdown">
        <span ng-show="newField.category">{{ newField.category.title }}</span> <span ng-hide="newField.category">Selecione uma categoria</span> <span class="caret"></span>
      </button>

      <ul class="dropdown-menu" role="menu">
        <li ng-repeat="category in categories"><a href="" ng-click="selectCategory(category)">{{ category.title }}</a></li>
      </ul>
    </div>

    <div class="row" class="pages-animation" ng-show="newField.category !== null">
      <div class="col col-xs-4">
        <select class="multiple-select" style="width: 100%;" ui-select2 ng-model="newField.fieldId" data-placeholder="Selecione uma opção">
          <option value="">Selecione um campo...</option>
          <option ng-repeat="field in newField.category.fields" ng-value="field.id">{{ field.label && field.label || field.title }}</option>
        </select>
      </div>

      <div class="col col-xs-3" ng-hide="newField.field === null">
        <div class="btn-group btn-group-block">
          <button type="button" class="btn btn-default dropdown-toggle btn-block" data-toggle="dropdown">
            <span ng-show="newField.condition">{{ newField.condition.text }}</span> <span ng-hide="newField.condition">Selecione</span> <span class="caret"></span>
          </button>

          <ul class="dropdown-menu" role="menu">
            <li ng-repeat="method in methods | filter: { availableKinds: newField.field.kind }"><a href="" ng-click="selectCondition(method)">{{ method.text }}</a></li>
          </ul>
        </div>
      </div>

      <div class="col col-xs-4" ng-show="newField.field.kind !== 'radio' && newField.field.kind !== 'checkbox' && newField.field.kind !== 'select' && newField.field !== null">
        <input type="text" class="form-control" placeholder="Digite o valor" ng-model="newField.value" />
      </div>

      <div class="col col-xs-4" ng-show="(newField.field.kind === 'radio' || newField.field.kind === 'checkbox' || newField.field.kind === 'select') && newField.field !== null">
        <select class="multiple-select" style="width: 100%;" ui-select2 ng-model="newField.value" data-placeholder="Selecione uma opção" multiple>
          <option ng-repeat="value in newField.field.available_values" value="{{ value }}">{{ value }}</option>
        </select>
      </div>

      <div class="col col-xs-1" ng-show="newField.field !== null">
        <button type="button" class="btn btn-info btn-custom" ng-click="addItem()">Ok</button>
      </div>

      <div class="block-disabled" ng-show="newField.category === null"></div>
    </div>
  </div>

  <table class="table custom_table">
    <thead>
      <tr>
        <td width="38%"><span>Campo</span></td>
        <td width="20%">Condição</td>
        <td width="38%">Valor</td>
        <td width="4%"></td>
      </tr>
    </thead>

    <tr ng-repeat="item in items" fields-filter-item>
      <td>
        <select class="multiple-select" style="width: 100%;" ui-select2 ng-model="item.fieldId" data-placeholder="Selecione uma opção">
          <option ng-repeat="field in item.category.fields" ng-value="field.id">{{ field.label && field.label || field.title }}</option>
        </select>
      </td>

      <td>
        <div class="btn-group btn-group-block">
          <button type="button" class="btn btn-default dropdown-toggle btn-block" data-toggle="dropdown">
            <span ng-show="item.condition">{{ item.condition.text }}</span> <span ng-hide="item.condition">Selecione</span> <span class="caret"></span>
          </button>

          <ul class="dropdown-menu" role="menu">
            <li ng-repeat="method in methods | filter: { availableKinds: item.field.kind }"><a href="" ng-click="changeCondition(method)">{{ method.text }}</a></li>
          </ul>
        </div>
      </td>

      <td ng-show="item.field.kind !== 'radio' && item.field.kind !== 'checkbox' && item.field.kind !== 'select'">
        <input type="text" class="form-control" placeholder="Digite o valor" ng-model="item.value" />
      </td>

      <td ng-show="item.field.kind === 'radio' || item.field.kind === 'checkbox' || item.field.kind === 'select'">
        <select class="multiple-select" style="width: 100%;" ui-select2 ng-model="item.value" data-placeholder="Selecione uma opção" multiple>
          <option ng-repeat="value in item.field.available_values" value="{{ value }}">{{ value }}</option>
        </select>
      </td>

      <td class="actions">
        <a class="icon_action" href="" ng-click="delete()"><span class="glyphicon glyphicon-trash"></span></a>
      </td>
    </tr>
  </table>
</div>

<div class="modal-footer">
   <button type="button" class="btn btn-info btn-custom btn-fat-custom" ng-click="save()">Criar filtro</button>
</div>
