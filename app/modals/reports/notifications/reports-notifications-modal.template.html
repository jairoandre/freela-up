<div class="modal-header">
  <button type="button" class="close" ng-click="close()">&times;</button>
  <h3 class="modal-title">Emitir notificação</h3>
</div>

<div class="modal-body">

  <div ng-if="showModalMessage" class="message-status fade-animation" ng-class="modalMessage.messageClass">
    <p><span class="glyphicon" ng-class="glyphicons[modalMessage.icon]"></span> {{ modalMessage.text }}</p>
  </div>

  <div class="table-div">

    <table id="reports-nofitications-table" class="table custom_table items-listing-table">
      <thead>
      <tr>
        <td class="type-cell">
          <span>Tipo</span>
        </td>
        <td class="status-cell">
          <span>Estado vinculado</span>
        </td>
        <td class="overdue-cell">
          <span>Prazo total</span>
        </td>
        <td class="date-cell">
          <span>Data de emissão</span>
        </td>
        <td class="overdue-cell">
          <span>Prazo Restante</span>
        </td>
        <td class="button-cell"></td>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="notification in notifications | orderBy:'notification_type.order'"
          ng-click="openReport(report.id, $event)">
        <td class="type-cell">
          <a href="">
            <span class="glyphicon glyphicon-search" title="Ordem: {{notification.notification_type.order}}"></span>
          </a>&nbsp;&nbsp;<b>{{notification.notification_type.title }}</b>
        </td>
        <td class="status-cell">
          <div ng-if="notification.notification_type.reports_status_id">
            <span class="status-color"
                  style="background-color: {{statusesMap[notification.notification_type.reports_status_id].color}}"></span>
            &nbsp;{{statusesMap[notification.notification_type.reports_status_id].title}}
          </div>
          <div ng-if="!notification.notification_type.reports_status_id">-</div>
        </td>
        <td class="overdue-cell">
          {{ getDefaultDeadlineInDaysTxt(notification) }}
        </td>
        <td class="date-cell">{{ notification.created_at ? (notification.created_at | date:'dd/MM/yy') : '-'}}</td>
        <td class="overdue-cell">
          {{ getDaysToDeadlineTxt(notification) }}
        </td>
        <td class="button-cell">
          <button ng-click="send(notification)" class="btn btn-info btn-custom"
                  ng-if="notification.able_to_send && !confirmSendMap[notification.notification_type.id]">
            {{ notification.sent ? 'Reemitir' : 'Emitir' }}
          </button>
          <button ng-click="confirmSend(notification)" class="btn btn-info btn-custom"
                  ng-if="notification.able_to_send && confirmSendMap[notification.notification_type.id]"
                  style="background: #ff5e33"
                  promise-btn="notificationPromises[notification]">Confirmar
          </button>
          <button class="btn btn-info btn-custom" ng-if="!notification.sent && !notification.able_to_send"
                  disabled="true">Emitir
          </button>
          <div class="reports-notification-emitted" ng-if="notification.sent && !notification.able_to_send">
            <b><span class="glyphicon glyphicon-ok"></span>&nbsp;&nbsp;Emitida</b>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="modal-footer">
  <a href="" ng-click="restartProcess()" style="float: left; font-weight: bold">Reiniciar</a>
</div>
