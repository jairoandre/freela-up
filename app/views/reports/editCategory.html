<div id="main_layout" ng-file-drop>
  <div id="sidebar" hack-sidebar-height>
    <!-- Include views/layouts/menu.html -->
    <div ng-include="'views/layout/menu.html'"></div>
  </div>

  <div id="main_content">
    <!-- Include views/layouts/header.html -->
    <div ng-include="'views/layout/header.html'"></div>

    <div class="loading" ng-show="loading"></div>

    <div ng-hide="loading">
      <div class="title">
        <ul>
          <li><a href="#/reports">Relatos</a></li>
          <li><a href="#/reports/categories">Gerenciar categorias</a></li>
          <li><span ng-hide="updating">Nova categoria</span><span ng-show="updating">{{ category.title }}</span></li>
        </ul>
      </div>

      <div class="content">
        <div class="alert alert-danger" ng-show="inputErrors">
          <p ng-bind-html="inputErrors | formatErrors"></p>
        </div>

        <div class="alert alert-success" ng-show="updated">
          <p>Categoria de relato atualizada com sucesso!</p>
        </div>

        <form ng-submit="send()">
          <div class="form-group">
            <label for="form_name">Nome da categoria</label>
            <input type="text" class="form-control input-lg" id="form_name" ng-model="category.title" generic-input name="title">
          </div>

          <div class="form-group">
            <label>Categoria de inventário relacionada</label>

            <select multiple class="form-control" ng-model="category.inventory_categories" ng-options="category.id as category.title for category in categories">
            </select>
          </div>

          <div class="form-group upload">
            <label>Ícone da categoria</label>

            <div class="queue">
              <div ng-show="uploader.isHTML5" class="drop-zone" ng-file-over ng-style="{'background-color': category.color}">
                <span ng-show="uploader.queue.length == 0" ng-hide="icon">Arraste a imagem</span>

                <div class="image" ng-show="icon && uploader.queue.length == 0">
                  <img ng-src="{{ icon }}" width="65" height="65">
                </div>

                <div class="image" ng-repeat="item in uploader.queue">
                  <div ng-thumb="{ file: item.file, width: 60, height: 60 }"></div>
                </div>
              </div>
            </div>

            <div class="btn btn-default btn-upload">
                <span>Selecione um arquivo</span>

                <input ng-file-select type="file" multiple  />
            </div>
          </div>

          <div class="form-group">
            <label>Cor representativa</label>
            <div class="row">
              <div class="col-md-2" generic-input name="color">
                <input type="text" colorpicker type="text" ng-model="category.color" class="form-control input-lg">
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>Tempo de resolução do relato</label>
            <div class="row">
              <div class="col-md-2">
                <input type="text" class="form-control input-lg" ng-model="category.resolution_time" generic-input name="resolution_time">
              </div>

              <div class="col-md-2" style="padding: 0px;">
                <div class="btn-group">
                  <button type="button" class="btn btn-default dropdown-custom-small dropdown-toggle input-lg" data-toggle="dropdown">
                  Segundos <span class="pull-right"><span class="caret"></span></span>
                  </button>

                  <ul class="dropdown-menu" role="menu">
                    <li class="active"><a href="">Segundos</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>Permitir criar relatos em pontos livres</label>

            <div class="clearfix"></div>

            <input type="checkbox" bs-switch ng-model="category.allows_arbitrary_position">
          </div>

          <div class="form-group">
            <label generic-input name="statuses">Status de relatos disponíveis <a href="" ng-click="manageStatuses()">(Gerenciar status)</a></label>

            <ul>
              <li ng-repeat="status in category.statuses">{{ status.title }}</li>
            </ul>
          </div>

          <div class="form-group">
            <label>Feedback do usuário</label>
            <div class="row">
              <div class="col-md-2" style="padding-top: 9px;">
                <input type="checkbox" class="pull-right" bs-switch ng-model="enabled_user_response_time">
              </div>

              <div class="col-md-2" style="padding: 0px;">
                <input type="text" class="form-control input-lg" ng-model="category.user_response_time" generic-input name="user_response_time" ng-show="enabled_user_response_time">
              </div>

              <div class="col-md-2">
                <div class="btn-group" ng-show="enabled_user_response_time">
                  <button type="button" class="btn btn-default dropdown-custom-small dropdown-toggle input-lg" data-toggle="dropdown">
                  Segundos <span class="pull-right"><span class="caret"></span></span>
                  </button>

                  <ul class="dropdown-menu" role="menu">
                    <li class="active"><a href="">Segundos</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <hr />

          <button type="submit" class="btn btn-info btn-custom btn-lg-custom" ng-hide="updating">Criar categoria</button>

          <button type="submit" class="btn btn-info btn-custom btn-lg-custom" ng-show="updating">Atualizar categoria</button>

        </form>
      </div>
    </div>

  </div>
</div>
