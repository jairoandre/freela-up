<div id="main_layout">
  <div id="sidebar" hack-sidebar-height>
    <!-- Include views/layouts/menu.html -->
    <div ng-include="'views/layout/menu.html'"></div>
  </div>

  <div id="main_content">
    <!-- Include views/layouts/header.html -->
    <div ng-include="'views/layout/header.html'"></div>

    <div class="loading" ng-show="loading"></div>
    <div class="loading" ng-show="loadingContent"></div>

    <div ng-hide="loading" class="pages-animation" style-results-table>
      <div class="title">
        <div class="links">
          <a href="#/inventories" class="active"><span class="glyphicon glyphicon-list"></span> <p>Explorar em lista</p></a>
          <a href="#/inventories/map"><span class="glyphicon glyphicon-map-marker"></span> <p>Explorar no mapa</p></a>
        </div>

        <div class="btn-group">
          <a href="#/inventories/categories/select" class="btn btn-info btn-custom-group">+ Novo item</a>
          <a href="#/inventories/categories" class="btn btn-info btn-custom-group">Gerenciar categorias</a>
        </div>

        <a href="" ng-click="reload()" class="btn btn-info btn-custom"><i class="glyphicon glyphicon-refresh"></i></a>

        <a href="" ng-click="share()" class="btn btn-info btn-custom"><i class="glyphicon glyphicon-link"></i></a>
      </div>

      <div class="advancedSearch" id="advancedSearch">
        <div class="col-xs-12 search_column1">
          <span class="glyphicon glyphicon-search search_icon"></span>
          <input type="text" placeholder="Busque um filtro..." on-focus="show_availableFilters = true" on-blur="show_availableFilters = false" on-blur-delay="200" ng-model="filterQuery" style="width: 80%;" />

          <div class="clearfix"></div>

          <div class="availableFilters" ng-show="show_availableFilters">
            <a href="" ng-click="loadFilter('query')">Protocolo ou endereço contém...</a>
            <a href="" ng-click="loadFilter(filter.action)" ng-repeat="filter in availableFilters | filter:filterQuery">{{ filter.name }}</a>
          </div>

          <div class="advanced_filters_bar" ng-show="activeAdvancedFilters.length !== 0">
            <div class="filter" ng-repeat="filter in activeAdvancedFilters"><b>{{ filter.title }}</b> {{ filter.desc }} <span class="glyphicon glyphicon-remove" ng-click="removeFilter(filter)"></span></div>
          </div>

          <div class="clearfix"></div>

          <a href="" class="clear_filters" ng-show="activeAdvancedFilters.length !== 0" ng-click="resetFilters()"><span class="glyphicon glyphicon-remove"></span> Limpar todos os filtros</a>
        </div>

        <div class="clearfix"></div>
      </div>

      <table class="table custom_table" infinite-scroll="getData(true)" infinite-scroll-distance="3" ng-class="{'advanced-filters-margin': advancedSearch == true}">
        <thead>
          <tr>
            <td ng-click="changeSorting('title')"
                ng-class="selectedCls('title')" width="60%" class="sort-table">
              <span>Nome</span><span class="arrow"></span>
            </td>
            <td ng-click="changeSorting('inventory_category_id')"
                ng-class="selectedCls('inventory_category_id')" class="sort-table">
              <span>Categoria</span><span class="arrow"></span>
            </td>
            <td ng-click="changeSorting('created_at')"
                ng-class="selectedCls('created_at')" class="sort-table">
              <span>Data de inclusão</span><span class="arrow"></span>
            </td>
            <td></td>
          </tr>
        </thead>

        <tr ng-repeat="item in items | orderBy:sort.column:sort.descending">
          <td class="status_color"><span ng-repeat="status in getInventoryCategory(item.inventory_category_id).statuses" ng-style="{'background-color': status.color}" ng-show="status.id == item.inventory_status_id"></span><a href="#/inventories/categories/{{ item.inventory_category_id }}/item/{{ item.id }}">{{ item.title }}</a></td>
          <td>{{ getInventoryCategory(item.inventory_category_id).title }}</td>
          <td>{{ item.created_at | date:'dd/MM/yy HH:mm'}}</td>
          <td class="actions">
            <a class="icon_action" href="#/inventories/categories/{{ item.inventory_category_id }}/item/{{ item.id }}/edit">
              <span class="glyphicon glyphicon-edit"></span>
            </a>
            <a class="icon_action" href="" ng-click="deleteItem(item, getInventoryCategory(item.inventory_category_id))">
              <span class="glyphicon glyphicon-trash"></span>
            </a>
          </td>
        </tr>
      </table>

      <div class="loadingScrolling" ng-show="loadingPagination && !loadingContent"></div>
    </div>


  </div>
</div>
