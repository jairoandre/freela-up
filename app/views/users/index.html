<div id="main_layout">
  <div id="sidebar" hack-sidebar-height>
    <!-- Include views/layouts/menu.html -->
    <div ng-include="'views/layout/menu.html'"></div>
  </div>

  <div id="main_content">
    <!-- Include views/layouts/header.html -->
    <div ng-include="'views/layout/header.html'"></div>

    <div class="loading" ng-show="loading"></div>
    <div class="loading" ng-show="loadingContent"></div>

    <div ng-hide="loading">
      <div class="title">
        <ul>
          <li>Usuários</li>
        </ul>

        <a href="#/users/add" class="btn btn-info btn-custom">+ Novo usuário</a>
      </div>

      <div class="simple_search">
        <div class="col-md-8 search_column1">
          <span class="glyphicon glyphicon-search search_icon"></span>
          <input type="text" placeholder="Buscar usuários..." keyboard-poster="search" />
        </div>

        <div class="col-md-4 filter_dropdown_c">
          <div class="filter_dropdown">
            <div class="btn-group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
              <span ng-show="!groupId">Grupo</span><span ng-repeat="group in groups" ng-hide="groupId != group.id">{{ group.name }}</span> <span class="pull-right"><span class="caret"></span></span>
              </button>

              <ul class="dropdown-menu" role="menu">
                <li ng-repeat="group in groups" ng-class="{active: groupId == group.id}"><a href="#/users/group/{{ group.id }}">{{ group.name }}</a></li>
                <li class="divider"></li>
                <li ng-class="{active: !groupId}"><a href="#/users">Todos</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <table class="table custom_table" ng-hide="loadingContent" infinite-scroll="getData(true)" infinite-scroll-distance="3">
        <thead>
          <tr>
            <td>E-mail</td>
            <td>Grupo</td>
            <td></td>
          </tr>
        </thead>

        <tr ng-repeat="user in users">
          <td><a href="#/users/{{ user.id }}">{{ user.email }}</a></td>
          <td><span ng-repeat="group in user.groups">{{ group.name }}</span> </td>
          <td class="pull-text-right">
            <a href="#/users/edit/{{ user.id }}"><span class="glyphicon glyphicon-edit"></span></a>
            <a href="" ng-click="deleteUser(user)"><span class="glyphicon glyphicon-trash"></span></a>
          </td>
        </tr>

      </table>

      <div class="loadingScrolling" ng-show="loadingPagination && !loadingContent"></div>
    </div>

  </div>
</div>

<script type="text/ng-template" id="removeUser.html">
      <div class="modal-header">
        <button type="button" class="close" ng-click="close()">&times;</button>
        <h4 class="modal-title">Remover usuário</h4>
      </div>
      <div class="modal-body">
        <p>Atenção, você clicou em um botão para remover o usuário <b>{{ user.email }}</b>. Ao confirmar, você esta ciente e responsável pela exclusão.</p>

        <p class="text-danger">Se você tem certeza, digite abaixo a palavra <code>DELETAR</code> e clique no botão remover.</p>

        <div class="form-group has-error">
          <input type="text" class="form-control" ng-model="confirmText">
        </div>
      </div>

      <div class="modal-footer">
      <button type="button" class="btn btn-fat-custom btn-default" ng-click="close()">Cancelar</button>
        <button type="button" class="btn btn-fat-custom btn-danger" ng-click="confirm()" ng-disabled="confirmText.toLowerCase() !== 'deletar'">Remover</button>
      </div>
</script>
